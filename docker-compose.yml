version: '3.8'

services:
  web:
    build:
      context: .
      dockerfile: packages/web/Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    restart: always

  docs:
    build:
      context: .
      dockerfile: packages/docs/Dockerfile
    ports:
      - "4321:4321"
    environment:
      - NODE_ENV=production
    restart: always

  cli:
    build:
      context: .
      dockerfile: packages/cli/Dockerfile
    environment:
      - NODE_ENV=production
    # CLI is a tool, not a service, so it exits.
    # We can keep it running with a dummy command if needed for exec,
    # or just let it exit. For now, let's keep it running for debugging.
    command: tail -f /dev/null
  # Optional: Local Solana Validator for development
  # validator:
  #   image: solanalabs/solana:v1.18.11
  #   command: solana-test-validator
  #   ports:
  #     - "8899:8899"
  #     - "8900:8900"
