
> @ghostspeak/sdk@2.0.1 test
> vitest run --reporter=verbose tests/unit/client/base-instructions.test.ts

 DEPRECATED  "cache.dir" is deprecated, use Vite's "cacheDir" instead if you want to change the cache director. Note caches will be written to "cacheDir/vitest"

 RUN  v3.2.4 /Users/home/projects/GhostSpeak/packages/sdk-typescript

 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should send a basic transaction successfully 2ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should send transaction with detailed results 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should handle multiple instructions in a single transaction 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should validate instructions before sending 1ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should handle transaction errors gracefully 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should retry with exponential backoff in RPC-only mode 4ms
   ‚Üí baseInstructions.testConfirmTransaction is not a function
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should handle subscription-based confirmation when available 2ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should handle confirmation timeout 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should log instruction details during debug 4ms
   ‚Üí expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Received: 

[1m  1st log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Transaction sent, signature:",[90m
[31m+   "mock-signature",[90m
[2m  ][22m

[1m  2nd log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Signature length:",[90m
[31m+   14,[90m
[2m  ][22m

[1m  3rd log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Signature type:",[90m
[31m+   "string",[90m
[2m  ][22m

[1m  4th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Confirmation attempt 1/30",[90m
[2m  ][22m

[1m  5th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç No status found, trying transaction details...",[90m
[2m  ][22m

[1m  6th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "‚úÖ Transaction confirmed via direct lookup",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m6[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should estimate transaction cost accurately 0ms
   ‚Üí expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should fall back to default cost estimation on RPC failure 0ms
   ‚Üí expected "warn" to be called with arguments: [ ‚Ä¶(2) ][90m

Number of calls: [1m0[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should simulate transactions before sending 1ms
   ‚Üí expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should handle simulation errors 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should calculate transaction size correctly 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should calculate size for multiple instructions 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should log instruction details 0ms
   ‚Üí expected "log" to be called with arguments: [ 'üìã Instruction Details:' ][90m

Number of calls: [1m0[22m
[39m
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should get and decode a single account 1ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should return null for non-existent accounts 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle decoder not found 0ms
   ‚Üí expected "warn" to be called at least once
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should get and decode multiple accounts 1ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle various data formats in account decoding 1ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should get program accounts with filters 1ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle decoding errors gracefully in program accounts 1ms
   ‚Üí expected "warn" to be called with arguments: [ ‚Ä¶(2) ][90m

Number of calls: [1m0[22m
[39m
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should get raw account data 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should get all program accounts for recovery 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle discriminator validation errors 1ms
   ‚Üí promise resolved "null" instead of rejecting
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should execute single instruction 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should execute instruction with context 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should execute instruction with detailed results 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should propagate execution errors with context 2ms
   ‚Üí expected "error" to be called with arguments: [ ‚Ä¶(2) ][90m

Received: 

[1m  1st error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üö® GhostSpeak SDK Error:",[90m
[31m+   "Invalid instruction",[90m
[2m  ][22m

[1m  2nd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üîß Operation:",[90m
[31m+   "execute",[90m
[2m  ][22m

[1m  3rd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üìã Instruction:",[90m
[31m+   "test operation",[90m
[2m  ][22m

[1m  4th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üè¶ Accounts provided:",[90m
[31m+   1,[90m
[2m  ][22m

[1m  5th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA (signer)",[90m
[2m  ][22m

[1m  6th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "‚öôÔ∏è Parameters:",[90m
[31m+   {[90m
[31m+     "programId": "11111111111111111111111111111111",[90m
[31m+   },[90m
[2m  ][22m

[1m  7th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "[90m
[31m+ üí° Troubleshooting tips:",[90m
[2m  ][22m

[1m  8th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. Check that all required accounts are provided",[90m
[2m  ][22m

[1m  9th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  2. Verify account addresses are correct",[90m
[2m  ][22m

[1m  10th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  3. Ensure signers have sufficient SOL for transaction fees",[90m
[2m  ][22m

[1m  11th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  4. Confirm the program is deployed on the target network",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m11[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should handle missing context in error messages 1ms
   ‚Üí expected "error" to be called with arguments: [ ‚Ä¶(2) ][90m

Received: 

[1m  1st error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üö® GhostSpeak SDK Error:",[90m
[31m+   "Generic error",[90m
[2m  ][22m

[1m  2nd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üîß Operation:",[90m
[31m+   "execute",[90m
[2m  ][22m

[1m  3rd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üìã Instruction:",[90m
[31m+   "test",[90m
[2m  ][22m

[1m  4th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üè¶ Accounts provided:",[90m
[31m+   1,[90m
[2m  ][22m

[1m  5th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA (signer)",[90m
[2m  ][22m

[1m  6th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "‚öôÔ∏è Parameters:",[90m
[31m+   {[90m
[31m+     "programId": "11111111111111111111111111111111",[90m
[31m+   },[90m
[2m  ][22m

[1m  7th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "[90m
[31m+ üí° Troubleshooting tips:",[90m
[2m  ][22m

[1m  8th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. Check that all required accounts are provided",[90m
[2m  ][22m

[1m  9th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  2. Verify account addresses are correct",[90m
[2m  ][22m

[1m  10th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  3. Ensure signers have sufficient SOL for transaction fees",[90m
[2m  ][22m

[1m  11th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  4. Confirm the program is deployed on the target network",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m11[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Batching > should send multiple transactions in sequence 2ms
   ‚Üí expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Batching > should stop batch on first failure 0ms
   ‚Üí promise resolved "[ 'mock-signature', ‚Ä¶(2) ]" instead of rejecting
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle empty instruction arrays 1ms
   ‚Üí Cannot read properties of undefined (reading 'programAddress')
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle missing signers 0ms
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle very large instruction data 0ms
   ‚Üí expected "warn" to be called with arguments: [ StringContaining "Transaction size" ][90m

Number of calls: [1m0[22m
[39m
 √ó tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle RPC endpoint detection fallback 0ms
   ‚Üí Transaction 2 failed
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle transaction confirmation with various statuses 1001ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle transaction errors in confirmation status 1ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Performance Tests > should handle rapid sequential transactions 0ms
 ‚úì tests/unit/client/base-instructions.test.ts > BaseInstructions > Performance Tests > should efficiently estimate costs for multiple instructions 0ms

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 16 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should retry with exponential backoff in RPC-only mode
TypeError: baseInstructions.testConfirmTransaction is not a function
 ‚ùØ tests/unit/client/base-instructions.test.ts:318:30
    316|       mockRpcClientInstance.getSignatureStatuses.mockResolvedValueOnce‚Ä¶
    317|       
    318|       await baseInstructions.testConfirmTransaction('mock-signature')
       |                              ^
    319|       
    320|       expect(mockRpcClientInstance.getSignatureStatuses).toHaveBeenCal‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Building & Sending > should log instruction details during debug
AssertionError: expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Received: 

[1m  1st log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Transaction sent, signature:",[90m
[31m+   "mock-signature",[90m
[2m  ][22m

[1m  2nd log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Signature length:",[90m
[31m+   14,[90m
[2m  ][22m

[1m  3rd log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Signature type:",[90m
[31m+   "string",[90m
[2m  ][22m

[1m  4th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç Confirmation attempt 1/30",[90m
[2m  ][22m

[1m  5th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "üîç No status found, trying transaction details...",[90m
[2m  ][22m

[1m  6th log call:

[22m[2m  [[22m
[32m-   StringContaining "Debug - Instruction data",[90m
[31m+   "‚úÖ Transaction confirmed via direct lookup",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m6[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:346:29
    344|       await baseInstructions.testSendTransaction([mockInstruction], [m‚Ä¶
    345|       
    346|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
       |                             ^
    347|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
    348|     })

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should estimate transaction cost accurately
AssertionError: expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:356:29
    354|       
    355|       expect(cost).toBe(BigInt(5000))
    356|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
       |                             ^
    357|     })
    358| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should fall back to default cost estimation on RPC failure
AssertionError: expected "warn" to be called with arguments: [ ‚Ä¶(2) ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:366:30
    364|       
    365|       expect(cost).toBe(BigInt(6000)) // 5000 base + 1000 per instruct‚Ä¶
    366|       expect(consoleWarnSpy).toHaveBeenCalledWith(
       |                              ^
    367|         '‚ö†Ô∏è Real fee estimation failed, using fallback:',
    368|         expect.any(Error)

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should simulate transactions before sending
AssertionError: expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:382:29
    380|         }
    381|       })
    382|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
       |                             ^
    383|     })
    384| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Utilities > should log instruction details
AssertionError: expected "log" to be called with arguments: [ 'üìã Instruction Details:' ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:418:29
    416|       baseInstructions.testLogInstructionDetails(mockInstruction)
    417|       
    418|       expect(consoleLogSpy).toHaveBeenCalledWith('üìã Instruction Detai‚Ä¶
       |                             ^
    419|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
    420|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle decoder not found
AssertionError: expected "warn" to be called at least once
 ‚ùØ tests/unit/client/base-instructions.test.ts:500:30
    498| 
    499|       expect(account).toBeNull()
    500|       expect(consoleWarnSpy).toHaveBeenCalled()
       |                              ^
    501|     })
    502| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle decoding errors gracefully in program accounts
AssertionError: expected "warn" to be called with arguments: [ ‚Ä¶(2) ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:613:30
    611| 
    612|       expect(accounts).toHaveLength(0)
    613|       expect(consoleWarnSpy).toHaveBeenCalledWith(
       |                              ^
    614|         'Failed to decode account EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGk‚Ä¶
    615|         expect.any(Error)

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Account Operations > should handle discriminator validation errors
AssertionError: promise resolved "null" instead of rejecting

[32m- Expected:[39m 
Error {
  "message": "rejected promise",
}

[31m+ Received:[39m 
null

 ‚ùØ tests/unit/client/base-instructions.test.ts:688:7
    686|           'getAgentAccountDecoder'
    687|         )
    688|       ).rejects.toThrow('expected 8 bytes, got 3')
       |       ^
    689|     })
    690|   })

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should propagate execution errors with context
AssertionError: expected "error" to be called with arguments: [ ‚Ä¶(2) ][90m

Received: 

[1m  1st error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üö® GhostSpeak SDK Error:",[90m
[31m+   "Invalid instruction",[90m
[2m  ][22m

[1m  2nd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üîß Operation:",[90m
[31m+   "execute",[90m
[2m  ][22m

[1m  3rd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üìã Instruction:",[90m
[31m+   "test operation",[90m
[2m  ][22m

[1m  4th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "üè¶ Accounts provided:",[90m
[31m+   1,[90m
[2m  ][22m

[1m  5th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA (signer)",[90m
[2m  ][22m

[1m  6th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "‚öôÔ∏è Parameters:",[90m
[31m+   {[90m
[31m+     "programId": "11111111111111111111111111111111",[90m
[31m+   },[90m
[2m  ][22m

[1m  7th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "[90m
[31m+ üí° Troubleshooting tips:",[90m
[2m  ][22m

[1m  8th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. Check that all required accounts are provided",[90m
[2m  ][22m

[1m  9th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  2. Verify account addresses are correct",[90m
[2m  ][22m

[1m  10th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  3. Ensure signers have sufficient SOL for transaction fees",[90m
[2m  ][22m

[1m  11th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute test operation:",[90m
[32m-   Any<Error>,[90m
[31m+   "  4. Confirm the program is deployed on the target network",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m11[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:726:31
    724|       ).rejects.toThrow('Invalid instruction')
    725| 
    726|       expect(consoleErrorSpy).toHaveBeenCalledWith(
       |                               ^
    727|         '‚ùå Failed to execute test operation:',
    728|         expect.any(Error)

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Execution Helpers > should handle missing context in error messages
AssertionError: expected "error" to be called with arguments: [ ‚Ä¶(2) ][90m

Received: 

[1m  1st error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üö® GhostSpeak SDK Error:",[90m
[31m+   "Generic error",[90m
[2m  ][22m

[1m  2nd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üîß Operation:",[90m
[31m+   "execute",[90m
[2m  ][22m

[1m  3rd error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üìã Instruction:",[90m
[31m+   "test",[90m
[2m  ][22m

[1m  4th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "üè¶ Accounts provided:",[90m
[31m+   1,[90m
[2m  ][22m

[1m  5th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA (signer)",[90m
[2m  ][22m

[1m  6th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "‚öôÔ∏è Parameters:",[90m
[31m+   {[90m
[31m+     "programId": "11111111111111111111111111111111",[90m
[31m+   },[90m
[2m  ][22m

[1m  7th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "[90m
[31m+ üí° Troubleshooting tips:",[90m
[2m  ][22m

[1m  8th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  1. Check that all required accounts are provided",[90m
[2m  ][22m

[1m  9th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  2. Verify account addresses are correct",[90m
[2m  ][22m

[1m  10th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  3. Ensure signers have sufficient SOL for transaction fees",[90m
[2m  ][22m

[1m  11th error call:

[22m[2m  [[22m
[32m-   "‚ùå Failed to execute instruction execution:",[90m
[32m-   Any<Error>,[90m
[31m+   "  4. Confirm the program is deployed on the target network",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m11[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:739:31
    737|       ).rejects.toThrow('Generic error')
    738| 
    739|       expect(consoleErrorSpy).toHaveBeenCalledWith(
       |                               ^
    740|         '‚ùå Failed to execute instruction execution:',
    741|         expect.any(Error)

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Batching > should send multiple transactions in sequence
AssertionError: expected "log" to be called with arguments: [ StringContaining{‚Ä¶} ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:758:29
    756|       expect(signatures).toHaveLength(3)
    757|       expect(signatures.every(sig => sig === 'mock-signature')).toBe(t‚Ä¶
    758|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
       |                             ^
    759|       expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaini‚Ä¶
    760|     })

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Transaction Batching > should stop batch on first failure
AssertionError: promise resolved "[ 'mock-signature', ‚Ä¶(2) ]" instead of rejecting

[32m- Expected:[39m 
Error {
  "message": "rejected promise",
}

[31m+ Received:[39m 
[
  "mock-signature",
  "mock-signature",
  "mock-signature",
]

 ‚ùØ tests/unit/client/base-instructions.test.ts:788:7
    786|       await expect(
    787|         baseInstructions.testSendTransactionBatch(batches, [mockSigner‚Ä¶
    788|       ).rejects.toThrow('Batch transaction 2 failed')
       |       ^
    789| 
    790|       expect(consoleErrorSpy).toHaveBeenCalledWith(

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle empty instruction arrays
TypeError: Cannot read properties of undefined (reading 'programAddress')
 ‚ùØ validateInstruction src/core/InstructionBuilder.ts:36:13
     34| function validateInstruction(instruction: unknown): asserts instructio‚Ä¶
     35|   const inst = instruction as Record<string, unknown>
     36|   if (!inst.programAddress) {
       |             ^
     37|     throw new Error('Invalid instruction format')
     38|   }
 ‚ùØ InstructionBuilder.execute src/core/InstructionBuilder.ts:90:7

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle very large instruction data
AssertionError: expected "warn" to be called with arguments: [ StringContaining "Transaction size" ][90m

Number of calls: [1m0[22m
[39m
 ‚ùØ tests/unit/client/base-instructions.test.ts:844:30
    842|       await baseInstructions.testSendTransaction([largeInstruction], [‚Ä¶
    843|       
    844|       expect(consoleWarnSpy).toHaveBeenCalledWith(expect.stringContain‚Ä¶
       |                              ^
    845|     })
    846| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/16]‚éØ

 FAIL  tests/unit/client/base-instructions.test.ts > BaseInstructions > Edge Cases and Error Handling > should handle RPC endpoint detection fallback
Error: Transaction 2 failed
 ‚ùØ tests/unit/client/base-instructions.test.ts:769:32
    767|       mockRpcClientInstance.sendTransaction
    768|         .mockResolvedValueOnce('sig1')
    769|         .mockRejectedValueOnce(new Error('Transaction 2 failed'))
       |                                ^
    770|         .mockResolvedValueOnce('sig3')
    771| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/16]‚éØ


 Test Files  1 failed (1)
      Tests  16 failed | 25 passed (41)
   Start at  16:51:35
   Duration  1.34s (transform 171ms, setup 20ms, collect 178ms, tests 1.03s, environment 0ms, prepare 41ms)

npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /Users/home/projects/GhostSpeak/packages/sdk-typescript
npm error workspace @ghostspeak/sdk@2.0.1
npm error location /Users/home/projects/GhostSpeak/packages/sdk-typescript
npm error command failed
npm error command sh -c vitest run --reporter=verbose tests/unit/client/base-instructions.test.ts
