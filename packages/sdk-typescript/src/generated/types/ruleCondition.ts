/**
 * This code was AUTOGENERATED by scripts/generate-missing-types.ts
 */
import {
  combineCodec,
  getStructDecoder,
  getStructEncoder,
  getU8Encoder,
  getU8Decoder,
  getU16Encoder,
  getU16Decoder,
  getU32Encoder,
  getU32Decoder,
  getU64Encoder,
  getU64Decoder,
  getI64Encoder,
  getI64Decoder,
  getBooleanEncoder,
  getUtf8Encoder,
  getUtf8Decoder,
  addEncoderSizePrefix,
  addDecoderSizePrefix,
  getAddressEncoder,
  getAddressDecoder,
  getBooleanDecoder,
  getBytesEncoder,
  getBytesDecoder,
  getArrayEncoder,
  getArrayDecoder,
  getOptionEncoder,
  getOptionDecoder,
  fixEncoderSize,
  fixDecoderSize,
  type Codec,
  type Decoder,
  type Encoder,
  type Address,
  type ReadonlyUint8Array,
  type Option
} from "@solana/kit";
import { getTupleEncoder, getTupleDecoder } from "@solana/codecs-data-structures";

import {
  getConditionTypeEncoder,
  getConditionTypeDecoder,
  type ConditionType,
  type ConditionTypeArgs
} from ".";

export type RuleCondition = {
  condition_type: ConditionType;
  subject_attributes: Array<readonly [string, string]>;
  resource_attributes: Array<readonly [string, string]>;
  action_attributes: Array<readonly [string, string]>;
  environment_attributes: Array<readonly [string, string]>;
};

export type RuleConditionArgs = {
  condition_type: ConditionTypeArgs;
  subject_attributes: Array<readonly [string, string]>;
  resource_attributes: Array<readonly [string, string]>;
  action_attributes: Array<readonly [string, string]>;
  environment_attributes: Array<readonly [string, string]>;
};

export function getRuleConditionEncoder(): Encoder<RuleConditionArgs> {
  return getStructEncoder([
    ["condition_type", getConditionTypeEncoder()],
    ["subject_attributes", getArrayEncoder(getTupleEncoder([addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder()), addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())]))],
    ["resource_attributes", getArrayEncoder(getTupleEncoder([addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder()), addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())]))],
    ["action_attributes", getArrayEncoder(getTupleEncoder([addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder()), addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())]))],
    ["environment_attributes", getArrayEncoder(getTupleEncoder([addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder()), addEncoderSizePrefix(getUtf8Encoder(), getU32Encoder())]))]
  ]);
}

export function getRuleConditionDecoder(): Decoder<RuleCondition> {
  return getStructDecoder([
    ["condition_type", getConditionTypeDecoder()],
    ["subject_attributes", getArrayDecoder(getTupleDecoder([addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder()), addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())]))],
    ["resource_attributes", getArrayDecoder(getTupleDecoder([addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder()), addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())]))],
    ["action_attributes", getArrayDecoder(getTupleDecoder([addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder()), addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())]))],
    ["environment_attributes", getArrayDecoder(getTupleDecoder([addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder()), addDecoderSizePrefix(getUtf8Decoder(), getU32Decoder())]))]
  ]);
}

export function getRuleConditionCodec(): Codec<RuleConditionArgs, RuleCondition> {
  return combineCodec(getRuleConditionEncoder(), getRuleConditionDecoder());
}
